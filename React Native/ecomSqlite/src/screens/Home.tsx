import { FlatList, StyleSheet } from 'react-native'
import React, { useEffect, useState } from 'react'
import { addProduct, getProducts } from '../db/databaseService'
import { View } from '@gluestack-ui/themed'
import { Text } from '@gluestack-ui/themed'
import ProductCard from '../components/ProductCard'

const Home = () => {
  const [products, setProducts] = useState([])

  useEffect(() => {
    // addProduct(
    //   'Micromax In Note 1',
    //   'data:image/jpeg;base64,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',
    //   'Micromax In Note 1, 16 GB Ram, 128 GB Rom, Octa Core Processor',
    //   10000,
    //   13000,
    //   'Mobile Phones'
    // );
    const getAllProducts = async () => {
      const pros = await getProducts();

      const productList: any = [];
      for (let i = 0; i < pros!![0].rows.length; i++) {
        productList.push(pros!![0].rows.item(i))
      }
      setProducts(productList);
    }
    getAllProducts();
  }, [])

  return (
    <View style={styles.container}>
      <Text fontSize={20}>Product List</Text>
      <FlatList
        data={products}
        contentContainerStyle={{margin:4}}
        horizontal={false}
        numColumns={2}
        renderItem={({ item }: any) => (
          <ProductCard {...item} />
        )}
        keyExtractor={(item: any) => item.id}
      />
    </View>
  )
}

export default Home

const styles = StyleSheet.create({
  container: {
    flex: 1,
    marginHorizontal: 16,
    marginVertical: 16
  }
})